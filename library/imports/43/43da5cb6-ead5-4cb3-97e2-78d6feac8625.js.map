{
  "version": 3,
  "sources": [
    "unknown"
  ],
  "names": [],
  "mappings": "AAAA,IAAI,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AACrC,IAAI,SAAS,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;;;;AAIrC,EAAE,CAAC,KAAK,CAAC;AACL,eAAS,EAAE,CAAC,SAAS;;AAErB,cAAU,EAAE;;;;;;;;;;;AAWR,eAAO,EAAG,GAAG;AACb,gBAAQ,EAAG,GAAG;KACjB;;;AAGD,UAAM,EAAE,gBAAU,EAAE,EAAE;AAClB,YAAI,CAAC,SAAS,GAAG,SAAS,CAAC,QAAQ,CAAC;AACpC,YAAI,CAAC,UAAU,GAAG,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC;;AAElD,YAAI,CAAC,YAAY,EAAE,CAAC;KACvB;;AAED,gBAAY,EAAG,wBAAU;;AAErB,YAAI,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,UAAU,EAC7B,UAAU,KAAK,EAAE;;AAEb,gBAAI,CAAC,KAAK,EAAE,CAAC;SAChB,EACD,IAAI,CAAC,CAAC;;;;;;;;AAQV,YAAI,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,YAAY,EAC/B,UAAU,KAAK,EAAE;AACb,gBAAI,CAAC,OAAO,EAAE,CAAC;SAClB,EACD,IAAI,CAAC,CAAC;;AAEV,YAAI,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,cAAc,EACjC,UAAU,KAAK,EAAE;AACb,gBAAI,CAAC,SAAS,EAAE,CAAC;SACpB,EACD,IAAI,CAAC,CAAC;;AAEV,YAAI,CAAC,IAAI,CAAC,EAAE,CAAC,SAAS,CAAC,aAAa,EAChC,UAAU,KAAK,EAAE;AACb,gBAAI,CAAC,UAAU,EAAE,CAAC;SACrB,EACD,IAAI,CAAC,CAAC;KACb;;;AAGD,UAAM,EAAE,gBAAU,EAAE,EAAE;AAClB,YAAG,IAAI,CAAC,UAAU,KAAG,IAAI,EAAC;AACtB,mBAAO;SACV;;;;AAID,YAAG,IAAI,CAAC,UAAU,CAAC,SAAS,KAAK,SAAS,CAAC,QAAQ,EAAC;AAChD,mBAAO;SACV;;AAED,YAAG,IAAI,CAAC,SAAS,KAAK,SAAS,CAAC,KAAK,IAAI,IAAI,CAAC,SAAS,KAAK,SAAS,CAAC,MAAM,EAAC;AACrE,gBAAI,OAAO,GAAG,IAAI,CAAC,KAAK,GAAG,EAAE,CAAC;;AAE9B,gBAAI,CAAC,IAAI,CAAC,CAAC,IAAI,OAAO,CAAC;;;;;;;;;;;SAW9B;KAEJ;;AAED,SAAK,EAAE,iBAAW;;AAEd,YAAG,IAAI,CAAC,UAAU,KAAG,IAAI,EAAC;AACtB,mBAAO;SACV;;AAED,YAAI,KAAK,CAAC;AACV,YAAI,YAAY,CAAC;AACjB,YAAI,OAAO,CAAC;AACZ,YAAG,IAAI,CAAC,SAAS,KAAK,SAAS,CAAC,QAAQ,EAAC;;AAErC,mBAAO,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;AAClC,iBAAK,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC,CAAC;AAC5C,gBAAI,CAAC,KAAK,GAAG,KAAK,GAAG,OAAO,CAAC;AAC7B,gBAAI,CAAC,UAAU,EAAE,CAAC;SACrB,MACI,IAAG,IAAI,CAAC,SAAS,KAAK,SAAS,CAAC,KAAK,EAAC;AACvC,mBAAO,GAAG,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;AAClC,iBAAK,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,GAAC,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC,CAAC;AAC7C,gBAAI,CAAC,KAAK,GAAG,KAAK,GAAG,OAAO,CAAC;AAC7B,gBAAI,CAAC,WAAW,EAAE,CAAC;SACtB;KAEJ;;AAED,WAAO,EAAE,mBAAW;;AAEhB,YAAG,IAAI,CAAC,UAAU,KAAG,IAAI,EAAC;AACtB,mBAAO;SACV;;AAED,YAAI,CAAC,SAAS,EAAE,CAAC;AACjB,YAAI,CAAC,KAAK,GAAE,CAAC,CAAC;KAEjB;;AAED,aAAS,EAAE,qBAAW;;AAElB,YAAG,IAAI,CAAC,UAAU,KAAG,IAAI,EAAC;AACtB,mBAAO;SACV;;AAED,YAAI,CAAC,WAAW,EAAE,CAAC;KACtB;;AAED,cAAU,EAAE,sBAAW;;AAEnB,YAAI,CAAC,SAAS,GAAG,SAAS,CAAC,KAAK,CAAC;;AAEjC,YAAI,KAAK,GAAG,IAAI,EAAE,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,cAAc,EAAE,IAAI,CAAE,CAAC;AACtE,YAAI,CAAC,IAAI,CAAC,aAAa,CAAE,KAAK,CAAE,CAAC;KACpC;;AAED,eAAW,EAAE,uBAAW;;AAEpB,YAAI,CAAC,SAAS,GAAG,SAAS,CAAC,MAAM,CAAC;;AAElC,YAAI,KAAK,GAAG,IAAI,EAAE,CAAC,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,cAAc,EAAE,IAAI,CAAE,CAAC;AACtE,YAAI,CAAC,IAAI,CAAC,aAAa,CAAE,KAAK,CAAE,CAAC;KACpC;;AAED,cAAU,EAAE,sBAAW;;AAEnB,YAAI,CAAC,SAAS,GAAG,SAAS,CAAC,QAAQ,CAAC;AACpC,YAAI,CAAC,KAAK,GAAE,CAAC,CAAC;KAEjB;;CASJ,CAAC,CAAC",
  "file": "unknown",
  "sourcesContent": [
    "var EventType = require(\"EventType\");\r\nvar StateType = require(\"StateType\");\r\n// var Box2dWeb = require(\"Box2dWeb\");\r\n// var JS_Gravity = require(\"JS_Gravity\");\r\n\r\ncc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        // foo: {\r\n        //    default: null,      // The default value will be used only when the component attaching\r\n        //                           to a node for the first time\r\n        //    url: cc.Texture2D,  // optional, default is typeof default\r\n        //    serializable: true, // optional, default is true\r\n        //    visible: true,      // optional, default is true\r\n        //    displayName: 'Foo', // optional\r\n        //    readonly: false,    // optional, default is false\r\n        // },\r\n        // ...\r\n        jHeight : 128,\r\n        jHeight2 : 128,\r\n    },\r\n\r\n    // use this for initialization\r\n    onLoad: function (dt) {\r\n        this.stateType = StateType.aLanding;\r\n        this.GravityCom = this.getComponent(\"JS_Gravity\");\r\n\r\n        this.initListener();\r\n    },\r\n    \r\n    initListener : function(){\r\n        \r\n        this.node.on(EventType.aJumpEvent, \r\n            function (event) {\r\n                // console.log(event.type);\r\n                this.mJump();\r\n            },\r\n            this);\r\n            \r\n        // this.node.on(EventType.aJumpStopEvent, \r\n        //     function (event) {\r\n\r\n        //     },\r\n        //     this);\r\n\r\n        this.node.on(EventType.aUpLockEvent, \r\n            function (event) {\r\n                this.mStopUp();\r\n            },\r\n            this);\r\n        \r\n        this.node.on(EventType.aJumpLockEvent, \r\n            function (event) {\r\n                this.mJumpLock();\r\n            },\r\n            this);\r\n            \r\n        this.node.on(EventType.aLandingEvent, \r\n            function (event) {\r\n                this.mLandState();\r\n            },\r\n            this);\r\n    },\r\n\r\n    // called every frame, uncomment this function to activate update callback\r\n    update: function (dt) {\r\n        if(this.GravityCom===null){\r\n            return;\r\n        }\r\n        \r\n        // console.log(this.stateType);\r\n        \r\n        if(this.GravityCom.stateType === StateType.aLanding){\r\n            return;\r\n        }\r\n\r\n        if(this.stateType === StateType.aJump || this.stateType === StateType.aJump2){\r\n                var offsetY = this.speed * dt;\r\n                \r\n                this.node.y += offsetY;\r\n\r\n                // this.node.y -= offsetY;\r\n                // if(this.node.y + offsetY <= this.startY){\r\n                //     this.node.y = this.startY;\r\n                //     this.speed = 0;\r\n                //     this.dispatchLanding();\r\n                // }\r\n                // else{\r\n                //     this.node.y += offsetY;\r\n                // }\r\n        }\r\n        \r\n    },\r\n    \r\n    mJump: function() {\r\n\r\n        if(this.GravityCom===null){\r\n            return;\r\n        }\r\n        \r\n        var jTime;\r\n        var actorJHeight;\r\n        var gravity;\r\n        if(this.stateType === StateType.aLanding){\r\n            // this.startY = this.node.y;\r\n            gravity = this.GravityCom.gravity;\r\n            jTime = Math.sqrt(2*this.jHeight / gravity);\r\n            this.speed = jTime * gravity;\r\n            this.mJumpState();\r\n        }\r\n        else if(this.stateType === StateType.aJump){\r\n            gravity = this.GravityCom.gravity;\r\n            jTime = Math.sqrt(2*this.jHeight2 / gravity);\r\n            this.speed = jTime * gravity;\r\n            this.mJump2State();\r\n        }\r\n\r\n    },\r\n    \r\n    mStopUp: function() {\r\n\r\n        if(this.GravityCom===null){\r\n            return;\r\n        }\r\n        \r\n        this.mJumpLock();\r\n        this.speed =0;\r\n\r\n    },\r\n    \r\n    mJumpLock: function() {\r\n\r\n        if(this.GravityCom===null){\r\n            return;\r\n        }\r\n        \r\n        this.mJump2State();\r\n    },\r\n    \r\n    mJumpState: function() {\r\n        // console.log(\"mJumpState-->\");\r\n        this.stateType = StateType.aJump;\r\n\r\n        var event = new cc.Event.EventCustom(EventType.aFallDownEvent, true );\r\n        this.node.dispatchEvent( event );\r\n    },\r\n    \r\n    mJump2State: function() {\r\n        // console.log(\"mJumpState2-->\");\r\n        this.stateType = StateType.aJump2;\r\n        \r\n        var event = new cc.Event.EventCustom(EventType.aFallDownEvent, true );\r\n        this.node.dispatchEvent( event );\r\n    },\r\n\r\n    mLandState: function() {\r\n\r\n        this.stateType = StateType.aLanding;\r\n        this.speed =0;\r\n        \r\n    },\r\n    \r\n    // dispatchLanding: function() {\r\n\r\n    //     var event = new cc.Event.EventCustom(EventType.aLandingEvent, true );\r\n    //     this.node.dispatchEvent( event );\r\n        \r\n    // },\r\n    \r\n});\r\n"
  ]
}